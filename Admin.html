<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/6614217c3b.js" crossorigin="anonymous"></script>
    <title>Document</title>
    <link rel="stylesheet" href="styles/UI.css">
    <!-- <link rel="stylesheet" href="styles/UI_plans.css"> -->
    <!-- <link rel="stylesheet" href="styles/Admin.css"> -->
    <link rel="icon" type="image/x-icon" href="https://mailtrap.io/wp-content/uploads/2021/04/cropped-favicon-196x196-1-270x270.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>

    <style>
        
        #setitfree{
            text-align: center;
        }
        #fixed{
            display: flex;
            justify-content: space-evenly;
        }
        #Admin-container{
            margin-top: 5%;
        }
        /* .d-flex{
            
            margin: auto;
        } */
        .tab-content{
            display: flex;
            /* border: 1px solid red; */
            margin: auto;
        
        }
        #userProfile{
            display: grid;
            margin: auto;
            justify-content: center;
            grid-template-columns: repeat(4,1fr);
            width: 80%;
           
        }
        #userProfile>div{
            /* border: 1px solid green; */
            width: 300px;
            margin: 10px;
            padding: 15px;
            box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
            
        }
        .Details{
            margin: auto;
        }
        .Username{
            text-align: center;
        }
        .Email{
            text-align: center;
        }
        .Plans{
            text-align: center;
        }  
        .Removeuser{
            text-align: center;
        }                  
        .Removeuser>button{
             width: 50%;

        }
         #v-pills-tab>div:nth-child(1){
              display: flex;
              /* margin: auto; */
              margin-bottom: 5%;
              /* position: absolute */
         }
         .Removeuser{
            margin-top: 10px;
         }
         
        .Removeuser>button{
            background-color: rgb(20, 181, 230);
            color: white;
            width: 100%;
            border: none;
            padding: 10px 0 10px 0;
            border-radius: 10px;
        }
        .Removeuser>button:hover{
            background-color: aqua;
            box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px inset, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset;
        }
        #messages{
            display: grid;
            /* border: 1px solid red; */
            grid-template-columns: repeat(4,1fr);
            align-items: center;
            margin: auto;
            text-align: center;
            width: 80%;
        }
        .Feedback{
            text-align: center;
        }
        #messages>div{
            width: 300px;
            margin: 10px;
            padding: 15px;
            box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
            border-radius: 10px;
        }
        #messages>div>div>img{
            border-radius: 50%;
        }
        #userProfile>div>div>img{
            border-radius: 50%;
        }


        @media all and (min-width:948px) and (max-width:1250px){
            #userProfile{
            
            grid-template-columns: repeat(3,1fr);
           
        }
        }
        @media all and (min-width:630px) and (max-width:947px){
            #userProfile{
            
            grid-template-columns: repeat(2,1fr);
           
        }
        }
        @media all and (min-width:0px) and (max-width:630px){
            #userProfile{
            
            grid-template-columns: repeat(1,1fr);
           
        }
        }
        /* @media all and (min-width:10px) and (max-width:424px){
            #userProfile{
            
            grid-template-columns: repeat(1,1fr);
           
        }
        } */




        /* for messages */
        
        @media all and (min-width:900px) and (max-width:1000px){
            #messages{
            
            grid-template-columns: repeat(4,1fr);
           
        }
        }
        @media all and (min-width:630px) and (max-width:900px){
            #messages{
            
            grid-template-columns: repeat(3,1fr);
           
        }
        }
        @media all and (min-width:424px) and (max-width:630px){
            #messages{
            
            grid-template-columns: repeat(2,1fr);
           
        }
        }
        @media all and (min-width:10px) and (max-width:424px){
            #messages{
            
            grid-template-columns: repeat(1,1fr);
           
        }
        }
        /* .sperateit{
    display: flex;
    justify-content: space-evenly;
}
.nav-item>button{
    font-size: 30px;
} */
#nav-tab{
    display: flex;
    justify-content: space-evenly;
}
#nav-tab>button{
    font-size: 20px;
}
#nav-tabContent{
    display: flex;
    margin: auto;
}
    </style>
</head>
<body>
    <div class="fixed-top" id="nav_body">
        <!-- nav bar starts from here -->
        <div class="sticky-top" id="nav">
           <div>
               <div id="logo"><a id="changelocation" href="Admin.html"><img id="nav_img" src="navbarimg/logo.png" alt=""></a></div>
           </div>
           <!-- Logo has been attached -->
           <!-- first dropdown box starts  first menu option-->
           <div id="visable">
               <div class="dropdown">
                   <!-- <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu2" data-bs-toggle="dropdown" aria-expanded="false">
                     Email Testing
                   </button> -->
                   <ul id="list_items" class="dropdown-menu" aria-labelledby="dropdownMenu2"> -->
                       <!-- <li>1automation for Email Testing</li> -->
                        <div id="QA_Automation">
                           <a href="QA_Automation.html">
                           <div><img src="navbarimg/qa_automation_icon_menu.svg" alt=""></div>
                           <div>
                               <!-- <li><h4>QA Automation</h4></li>
                               <p>Automation for Email Testing</p> -->
                           </div>
                          </a>
                       </div>
                       <div id="HTML_Check">
                           <a href="HTML_Check.html">
                           <div><img src="navbarimg/check_html_icon_menu.svg" alt=""></div>
                           <div>
                               <!-- <li><h4>HTML Check</h4></li>
                               <p>Find HTML/CSS issues</p> -->
                           </div>
                          </a>
                       </div>
                       <div id="Fake_SMTP_Server">
                           <a href="Fake_SMTP_Server.html">
                           <div><img src="navbarimg/fake_smtp_server_icon_menu.svg" alt=""></div>
                           <div>
                               <!-- <li><h4>Fake SMTP Server</h4></li>
                               <p>Your own SMTP server</p> -->
                           </div>
                           </a>
                       </div>
                       <div id="Sandbox_API">
                           <a href="Sandbox_API.html">
                           <div><img src="navbarimg/api_icon_menu.svg" alt=""></div>
                           <div>
                               <!-- <li><h4>Sandbox API</h4></li>
                               <p>Integrate with your application</p> -->
                           </div>
                          </a>
                       </div>
                   </ul>
                 </div>
                  <!-- first dropdown box ends -->
   
                  <!-- second option in nav-bar starting -->
                   <div id="second_option">
                       <a href="Email_API.html">
                       <!-- <button type="button" id="dropdownMenu2">
                        Email API
                       </button> -->
                   </a>
                   </div>
                  <!-- second option in nav-bar ending -->
   
                  <!-- third option in nav-bar starting -->
                  <div id="second_option">
                   <a href="Pricing.html">
                   <!-- <button type="button" id="dropdownMenu2">
                    Pricing
                   </button> -->
                   </a>
               </div>
                  <!-- third option in nav-bar ending -->
   
                  <!-- fourth option in nav-bar startyin -->
                  <div class="dropdown">
                   <!-- <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu2" data-bs-toggle="dropdown" aria-expanded="false">
                     Resources
                   </button> -->
                   <ul id="list_items" class="dropdown-menu" aria-labelledby="dropdownMenu2">
                       <!-- <li>1automation for Email Testing</li> -->
                       <div id="API">
                           <a href="API.html">
                           <div><img src="navbarimg/check_html_icon_menu.svg" alt=""></div>
                           <div>
                               <!-- <li><h4>API</h4></li>
                               <p>Intergrate with existing resources</p> -->
                           </div>
                       </a>
                       </div>
                       <div id="Case_studies">
                           <a href="Case_studies.html">
                           <div><img height="40px" width="40px" src="navbarimg/file-case.png" alt=""></div>
                           <div>
                               <!-- <li><h4>Case Studies</h4></li>
                               <p>Success stories of our Customers</p> -->
                           </div>
                          </a>
                       </div>
                       <div id="Blog">
                           <a href="Blog.html">
                           <div><img height="40px" width="40px" src="navbarimg/blog.png" alt=""></div>
                           <div>
                               <!-- <li><h4>Blog</h4></li>
                               <p>The best content about emails</p> -->
                           </div>
                           </a>
                       </div>
                       <div id="Help">
                           <a href="Help.html">
                           <div><img height="40px" width="40px" src="navbarimg/info-center.png" alt=""></div>
                           <div>
                               <!-- <li><h4>Help</h4></li>
                               <p>How-to's and Knowledge base</p> -->
                           </div>
                           </a>
                       </div>
                   </ul>
                 </div>
   
                  <!-- fourth option in nav-bar ending -->
                  <div id="user-signup">
                       

                       <button id="barr" class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <img style="width: 30px;height: 30px;" src="https://getahut.netlify.app/images/user.png"/>
                    </button>
                    <ul class="dropdown-menu">
                      <!-- <li><a href="userprofile.html" id="signin" class="dropdown-item" href="#">User Profil</a></li> -->
                      <li><a href="index.html"  class="dropdown-item" href="#">Log Out</a></li>
                      <!-- <li><a id="logout" class="dropdown-item" href="feedback.html">Feed Back</a></li> -->
                    </ul>
                  </div>
           </div>
           <!-- I -->
           <!-- N -->
           <!-- V -->
           <!-- E -->
           <!-- S -->
           <!-- invisible button starts -->
           <div id="inv_opt">
           <button id="bar" class="btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight"><i class="fa-solid fa-bars"></i></button>
   
               <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
               <div class="offcanvas-header">
                   <h5 class="offcanvas-title" id="offcanvasRightLabel"></h5>
                   <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
               </div>
               <div class="offcanvas-body">
                  <!-- added ones -->
                  <div>
                   <div class="dropdown">
                       <!-- <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu2" data-bs-toggle="dropdown" aria-expanded="false">
                         Email Testing
                       </button> -->
                       <ul id="list_items" class="dropdown-menu" aria-labelledby="dropdownMenu2">
                           <!-- <li>1automation for Email Testing</li> -->
                           <div id="QA_Automation">
                               <a href="QA_Automation.html">
                               <div><img src="navbarimg/qa_automation_icon_menu.svg" alt=""></div>
                               <div>
                                   <!-- <li><h4>QA Automation</h4></li>
                                   <p>Automation for Email Testing</p> -->
                               </div>
                              </a>
                           </div>
                           <div id="HTML_Check">
                               <a href="HTML_Check.html">
                               <div><img src="navbarimg/check_html_icon_menu.svg" alt=""></div>
                               <div>
                                   <!-- <li><h4>HTML Check</h4></li>
                                   <p>Find HTML/CSS issues</p> -->
                               </div>
                              </a>
                           </div>
                           <div id="Fake_SMTP_Server">
                               <a href="Fake_SMTP_Server.html">
                               <div><img src="navbarimg/fake_smtp_server_icon_menu.svg" alt=""></div>
                               <div>
                                   <!-- <li><h4>Fake SMTP Server</h4></li>
                                   <p>Your own SMTP server</p> -->
                               </div>
                               </a>
                           </div>
                           <div id="Sandbox_API">
                               <a href="Sandbox_API.html">
                               <div><img src="navbarimg/api_icon_menu.svg" alt=""></div>
                               <div>
                                   <!-- <li><h4>Sandbox API</h4></li>
                                   <p>Integrate with your application</p> -->
                               </div>
                              </a>
                           </div>
                       </ul>
                     </div>
                      <!-- first dropdown box ends -->
       
                      <!-- second option in nav-bar starting -->
                       <div id="second_option">
                           <a href="Email_API.html">
                           <!-- <button  type="button" id="dropdownMenu2">
                            Email API
                           </button> -->
                           </a>
                       </div>
                      <!-- second option in nav-bar ending -->
       
                      <!-- third option in nav-bar starting -->
                      <div id="second_option">
                       <a href="Pricing.html">
                       <!-- <button class="Pricing" type="button" id="dropdownMenu2">
                        Pricing
                       </button> -->
                       </a>
                   </div>
                      <!-- third option in nav-bar ending -->
       
                      <!-- fourth option in nav-bar startyin -->
                      <div class="dropdown">
                       <!-- <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu2" data-bs-toggle="dropdown" aria-expanded="false">
                         Resources
                       </button> -->
                       <ul id="list_items" class="dropdown-menu" aria-labelledby="dropdownMenu2">
                           <!-- <li>1automation for Email Testing</li> -->
                           <div id="API">
                               <a href="API.html">
                               <div><img src="navbarimg/check_html_icon_menu.svg" alt=""></div>
                               <div>
                                   <!-- <li><h4>API</h4></li>
                                   <p>Intergrate with existing resources</p> -->
                               </div>
                           </a>
                           </div>
                           <div id="Case_studies">
                               <a href="Case_studies.html">
                               <div><img height="40px" width="40px" src="navbarimg/file-case.png" alt=""></div>
                               <div>
                                   <!-- <li><h4>Case Studies</h4></li>
                                   <p>Success stories of our Customers</p> -->
                               </div>
                              </a>
                           </div>
                           <div id="Blog">
                               <a href="Blog.html">
                               <div><img height="40px" width="40px" src="navbarimg/blog.png" alt=""></div>
                               <div>
                                   <li><h4>Blog</h4></li>
                                   <p>The best content about emails</p>
                               </div>
                               </a>
                           </div>
                           <div id="Help">
                               <a href="Help.html">
                               <div><img height="40px" width="40px" src="navbarimg/info-center.png" alt=""></div>
                               <div>
                                   <li><h4>Help</h4></li>
                                   <p>How-to's and Knowledge base</p>
                               </div>
                               </a>
                           </div>
                       </ul>
                     </div>
                      <!-- fourth option in nav-bar ending -->
                      <div id="user-signup">
                          
                           <button id="barr" class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <img style="width: 30px;height: 30px;" src="https://getahut.netlify.app/images/user.png"/>
                        </button>
                        <ul class="dropdown-menu">
                          <!-- <li><a href="userprofile.html" id="signin" class="dropdown-item" href="#">User Profil</a></li> -->
                          <li><a href="index.html" onclick="Logout()"  class="dropdown-item" href="#">Log Out</a></li>
                          <!-- <li><a href="feedback.html" id="logout" class="dropdown-item" href="#">Feed Back</a></li> -->
                        </ul>
                      
                      </div>
                 </div>
                  <!-- ended ones -->
               </div>
               </div>
           </div>
           <!-- invisible button ends -->
       </div>  
   </div>
    <!-- main start -->
<div id="Admin-container">
    <br>
    <br>
    <!-- trying here -->
    <nav>
        <div class="nav nav-tabs" id="nav-tab" role="tablist">
          <button class="nav-link active" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home" aria-selected="true">User Profiles</button>
          <button class="nav-link" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#nav-profile" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">User Feed-Backs</button>
         
        </div>
      </nav>
      <div class="tab-content" id="nav-tabContent">
        <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
            <!-- code starts here -->
            <div id="userProfile">
                <!-- appending data here -->
             </div>
            <!-- code ends here -->
        </div>
        <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
            <!-- code starts here -->
            <div id="messages">
                <!-- appending data here -->
            </div>
            <!-- code ends here -->
        </div>
      </div>
    <!-- trying here ends -->
</body>
</html>
<script>
async function Admin(){
    try {
        let data = await fetch("http://localhost:3000/user",{
            method : "GET"
        })
        let out = await data.json()
        display(out)
        
    } catch (error) {
        
    }

}
Admin()

function display(data){
  data.forEach(item => {
    let div = document.createElement("div")
    div.setAttribute("id","setitfree")
    let div2= document.createElement('div')
    div2.setAttribute("class","Avatar");
    let img = document.createElement('img')
    img.src=item.avatar;
    img.style.length="200px"
    img.style.width="200px"
    let div3=document.createElement("div")
    div3.setAttribute("class","Details")
    let Username = document.createElement("div")
    Username.setAttribute("class",'Username')
    let bold = document.createElement("b")
    bold.innerText=item.username
    let Email = document.createElement("div")
    Email.setAttribute("class","Email");
    Email.innerText=item.email;
    let planes = document.createElement("div")
    planes.setAttribute("class","Plans")
    if(item.plan){
        planes.innerText=item.plan.planname
    }else{
        planes.innerText="-------"
    }
    let div4 = document.createElement("div")
    div4.setAttribute("class","Removeuser")
    let btn = document.createElement("button")
    btn.setAttribute("id","remove")
    btn.innerText="Remove User"
    btn.addEventListener("click",function(){
        console.log(item.id)
        Deleteit(item.id)
    })

    div2.append(img);
    Username.append(bold)
    div3.append(Username,Email,planes)
    div4.append(btn)
    div.append(div2,div3,div4)
    document.querySelector("#userProfile").append(div)

  });
}

async function Deleteit(id){
    try {
        
        let data = await fetch(`http://localhost:3000/user/${id}`,{
            method : "DELETE"
        })
        if(data.ok){
            alert("User Removed")
            Admin();
            Feedback()
            window.location.href="Admin.html"
        }
        
    } catch (error) {
        
    }

}













////////////

async function Feedback(){
    try {
        let data = await fetch("http://localhost:3000/user",{
            method : "GET"
        })
        let out = await data.json()
        displaycard1(out)
        
    } catch (error) {
        
    }

}
Feedback()

function displaycard1(data){
    let data1 = data.map((item)=>{
        if(item.feedback){
            return `   <div>
                        <div class="Avatar">
                            <img width='100%' src="${item.avatar}" alt="">
                        </div>
                        <div class="Details">
                            <div class="Username"><b>${item.username}</b></div>
                            <div class="Feedback">${item.feedback}</div>
                        </div>
                    </div>`
        }
    })
    document.querySelector("#messages").innerHTML = data1.join(" ")
}





 
        
 





</script>